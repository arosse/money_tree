<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Simulation Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Dashboard</h1>
    </header>

    <main>
        <section id="data-section">
            <h2>Current Data</h2>
            <p id="data-value">Loading data...</p>
            <button onclick="refreshData()">Refresh Data</button>
			<br><br>
        </section>

        <section id="chart-section">
            <h2>Data 01</h2>
			<div id="plotly-graph-1" class="plotly-graph"></div>
        
			<h2>Data 02</h2>
			<div id="plotly-graph-2" class="plotly-graph"></div>
			
			<h2>Data 03</h2>
			<div id="plotly-graph-3" class="plotly-graph"></div>
        </section>
		
    </main>


    <footer>
        <p>Footer Text</p>
    </footer>
	
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 

	<script>
		// Reusable layout and config
        const layout = {
            margin: {
                t: 10,  // Top margin
                r: 20,  // Right margin
                b: 30,  // Bottom margin
                l: 20   // Left margin
            }
        };
		
		const config = {
            modeBarButtonsToRemove: ['toImage', 'select2d', 'lasso2d', 'hoverClosestCartesian', 'toggleSpikelines', 'hoverCompareCartesian'],
            displaylogo: false
        };

		// Function to fetch JSON data from Google Drive
        async function fetchGraphData() {
            const fileUrl = "https://drive.google.com/uc?id=1_KDHm_7XmO9Z6xv2BpGebG-QHEN2OAB5&export=download";
            try {
                const response = await fetch(fileUrl);
                if (!response.ok) throw new Error("Failed to fetch data");
                const data = await response.json();
                return data;
            } catch (error) {
                console.error("Error fetching graph data:", error);
                return null;
            }
        }
		
		// Main function to load and display graphs
        async function loadGraphs() {
            const graphData = await fetchGraphData();
            if (!graphData) {
                document.getElementById("data-value").textContent = "Error loading data";
                return;
            }

            // Update each graph with data from JSON
            initPlotlyGraph("plotly-graph-1", graphData.x1, graphData.y1);
            initPlotlyGraph("plotly-graph-2", graphData.x2, graphData.y2);
            initPlotlyGraph("plotly-graph-3", graphData.x3, graphData.y3);

            document.getElementById("data-value").textContent = "Data loaded successfully";
        }

        // Load graphs on page load
        loadGraphs();
		
    </script>

</body>
</html>
